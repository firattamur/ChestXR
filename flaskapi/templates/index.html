<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>ChestXR</title>
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>

    <link rel="stylesheet" href="https://unpkg.com/tailwindcss@2.2.19/dist/tailwind.min.css"/>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap");

        html {
            zoom: 85%; font-family: "Poppins", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        }
    </style>

</head>

    <body class="leading-normal tracking-normal text-indigo-400 m-6 bg-cover bg-fixed"
          style="background-image: url('static/header.png');">
    <div class="h-full">
    <!--Nav-->
    <div class="w-full container mx-auto">
        <div class="w-full flex items-center justify-between">
            <a class="flex items-center text-indigo-400 no-underline hover:no-underline font-bold text-2xl lg:text-4xl"
               href="#">
                Chest<span
                    class="bg-clip-text text-transparent bg-gradient-to-r from-green-400 via-pink-500 to-purple-500">XR</span>
            </a>
        </div>
    </div>

    <!--Main-->
    <div class="container pt-24 md:pt-36 mx-auto flex flex-wrap flex-col md:flex-row items-center">
        <!--Left Col-->
        <div class="flex flex-col w-full xl:w-2/5 justify-center lg:items-start overflow-y-hidden">
            <h1 class="my-4 text-3xl md:text-5xl text-white opacity-75 font-bold leading-tight text-center md:text-left">
                <span class="bg-clip-text text-transparent bg-gradient-to-r from-green-400 via-pink-500 to-purple-500">
                  X-Ray
                </span>
                to
                <span class="bg-clip-text text-transparent bg-gradient-to-r from-green-400 via-pink-500 to-purple-500">
                  Diagnosis
                </span>
            </h1>
            <p class="leading-normal text-base md:text-2xl mb-8 text-center md:text-left">
                Medical image diagnose of 14 pathologies on Chest X-Ray images with the ChestXR model.
            </p>

            <form class="bg-gray-900 opacity-75 w-full shadow-lg rounded-lg px-8 pt-6 pb-8 mb-4">
                <div class="mb-4">
                    <label class="block text-blue-300 py-2 font-bold mb-2">
                        Upload a Image
                    </label>
                    <div class="flex justify-center mt-8">
                        <div class="bg-gray-900 max-w-2xl rounded-lg shadow-xl bg-gray-50">
                            <div class="m-4">
                                <div class="flex items-center justify-center w-full">
                                    <label
                                            class="flex flex-col w-full h-32 border-4 border-blue-200 border-dashed hover:bg-gray-100 hover:border-gray-300">
                                        <div class="flex flex-col items-center justify-center pt-7">
                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                 class="w-8 h-8 text-gray-400 group-hover:text-gray-600"
                                                 fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                      d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                            </svg>
                                            <p class="pt-1 text-sm tracking-wider text-gray-400 group-hover:text-gray-600" id="attach-image-text">
                                                Attach a Image</p>
                                        </div>
                                        <input type="file" class="opacity-0" id="inputfile"/>
                                    </label>
                                </div>
                            </div>
                            <div class="flex justify-center p-2">
                                <button type="button" class="w-full px-4 py-2 text-white bg-gray-900 rounded shadow-xl" id="uploadButton">Upload</button>
                            </div>
                        </div>
                    </div>
                </div>

            </form>
        </div>


        <!--Right Col-->
        <div class="w-full xl:w-3/5 p-12 overflow-hidden">

            <div class="bg-gray-900 shadow-lg rounded-lg px-8 pt-6 pb-8 mb-2">

                <div class="">
                    <p class="text-center mb-4 text-white">Input Image</p>
                    <img class="aspect-square rounded-md w-64 mx-auto" src="data:image/jpeg;base64,{{ input_image }}"/>
                </div>

            </div>

            <div class="bg-gray-900 w-full shadow-lg rounded-lg px-8 pt-6 pb-8 mb-4">

                <div class="columns-3 mt-4">

                    <div>
                        <p class="text-center mb-4 text-white">{{ top1_category }}</p>
                        <img class="w-full aspect-square rounded-md" src="data:image/jpeg;base64,{{ top1_image }}"/>
                    </div>

                    <div>
                        <p class="text-center mb-4 text-white">{{ top2_category }}</p>
                        <img class="w-full aspect-square rounded-md" src="data:image/jpeg;base64,{{ top2_image }}"/>
                    </div>

                    <div>
                        <p class="text-center mb-4 text-white">{{ top3_category }}</p>
                        <img class="w-full aspect-square rounded-md" src="data:image/jpeg;base64,{{ top3_image }}"/>
                    </div>

                </div>
            </div>
        </div>

        <!--Footer-->
        <div class="w-full pt-16 pb-6 text-sm text-center md:text-left fade-in">
            <a class="text-gray-500 no-underline hover:no-underline" href="#">&copy; App 2022</a>
            - Template by
            <a class="text-gray-500 no-underline hover:no-underline" href="https://www.tailwindtoolbox.com">TailwindToolbox.com</a>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<!--<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>-->
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>-->
<script src="static/index.js"></script>
<script type="text/javascript">

    $('#inputfile').bind('change', function () {

        let fileSize = this.files[0].size / 1024 / 1024; // this gives in MB

        if (fileSize > 1) {
            $("#inputfile").val(null);
            alert('file is too big. images more than 1MB are not allowed')
            return
        }

        let name = $('#inputfile').val();
        let ext  = $('#inputfile').val().split('.').pop().toLowerCase();

        if ($.inArray(ext, ['jpg', 'jpeg']) === -1) {
            $("#inputfile").val(null);
            alert('only jpeg/jpg files are allowed!');
        }

        const element = document.getElementById("attach-image-text");
        element.innerHTML = this.files[0].name;

    });

</script>

</body>
</html>